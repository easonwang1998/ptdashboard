<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bản đồ Chức năng Đối tác Gyosen</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { 
            --brand-red: #B21F2C; 
            --brand-gold: #B29A1F; 
            --brand-blue: #3B82F6;
            --ui-gray: #F8F9FA;
            --text-main: #2D3436;
            --text-muted: #94A3B8;
            --level3-dark-gray: #334155; 
        }
        body { 
            background-color: var(--ui-gray); 
            color: var(--text-main); 
            font-size: 1.1rem; 
            font-family: "PingFang TC", "Microsoft JhengHei", sans-serif; 
            line-height: 1.7; 
        }
        .loading-spinner { animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* header 與排版 */
        .hero-header { background: #ffffff; padding: 60px 20px 40px; text-align: center; }
        .hero-title { font-size: clamp(2.2rem, 8vw, 3.5rem); font-weight: 900; letter-spacing: -0.02em; color: #1A202C; margin-bottom: 2rem; }
        
        .timeline-container {
            background: white; border-radius: 28px; padding: 48px;
            margin-top: 20px; margin-bottom: 50px; box-shadow: 0 20px 50px rgba(0,0,0,0.06);
            border: 1px solid #edf2f7; position: relative; z-index: 10;
        }
        .schedule-grid { display: flex; flex-wrap: wrap; gap: 15px; justify-content: center; }
        .schedule-card {
            background: white; border-radius: 20px; display: flex; flex-direction: column;
            justify-content: center; align-items: center; text-align: center;
            border: 1px solid #E2E8F0; padding: 20px; width: 220px; height: 160px;
        }
        .step-label { font-size: 0.75rem; font-weight: 900; color: var(--text-muted); letter-spacing: 0.05em; margin-bottom: 8px; }
        
        /* 分頁按鈕 */
        .tab-container { display: flex; justify-content: center; gap: 12px; margin-bottom: 20px; flex-wrap: wrap; }
        .tab-btn { flex: 1; min-width: 140px; max-width: 200px; padding: 14px 24px; border-radius: 50px; font-weight: 800; transition: all 0.3s ease; cursor: pointer; border: 2px solid transparent; text-align: center;}
        .tab-btn.active { background-color: var(--brand-red); color: white; box-shadow: 0 4px 15px rgba(178, 31, 44, 0.3); }
        .tab-btn.inactive { background-color: white; color: var(--text-muted); border-color: #EEF2F7; }
        .tab-btn.dashboard-active { background-color: var(--brand-gold); color: white; box-shadow: 0 4px 15px rgba(178, 154, 31, 0.3); }

        .content-section { display: none; }
        .content-section.active { display: block; animation: fadeIn 0.5s ease; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        /* 外場/內場卡片樣式 */
        .standard-card { background: #ffffff; border-radius: 12px; padding: 24px; margin-bottom: 18px; border: 1px solid #EEF2F7; }
        .standard-title-row { display: flex; align-items: center; justify-content: space-between; margin-bottom: 12px; }
        .standard-label { font-weight: 800; color: #1A202C; font-size: 1.2rem; flex-shrink: 0; padding-right: 15px; }
        .standard-divider { height: 1px; flex-grow: 1; background: #E2E8F0; }
        .standard-desc { color: #4A5568; font-weight: 600; font-size: 1.05rem; padding-left: 15px; text-align: right; }
        .score-hint { font-size: 0.95rem; color: var(--text-muted); background: #F8FAFC; padding: 12px 16px; border-radius: 8px; margin-top: 12px; }
        
        /* L3 黑金卡片專用樣式 */
        .level-box-premium { background: var(--level3-dark-gray) !important; border: 2px solid var(--brand-gold) !important; box-shadow: 0 25px 50px rgba(0, 0, 0, 0.2) !important; position: relative; }
        .level-box-premium h2, .level-box-premium .premium-price { color: white !important; }
        .level-box-premium .text-slate-400 { color: #CBD5E1 !important; }
        .level-box-premium .standard-card { background: #475569 !important; border-color: #64748B !important; }
        .level-box-premium .standard-label { color: #F1F5F9 !important; }
        .level-box-premium .standard-divider { background: #64748B !important; }
        .level-box-premium .standard-desc { color: #E2E8F0 !important; }
        .level-box-premium .score-hint { background: #334155 !important; color: #94A3B8 !important; }
        .level-box-premium .sidebar-box { background: #475569 !important; color: #E2E8F0 !important; border: 1px solid #64748B; }
        .level-box-premium .sidebar-box h5 { color: var(--brand-gold) !important; }
        .premium-tag { position: absolute; top: -15px; right: 30px; background: var(--brand-gold); color: white; padding: 4px 16px; border-radius: 20px; font-size: 0.75rem; font-weight: 900; letter-spacing: 0.1em; box-shadow: 0 4px 10px rgba(0,0,0,0.2); }

        .sidebar-box { background: #F8FAFC; padding: 30px; border-radius: 20px; height: fit-content; }

        .footer-info { background: var(--level3-dark-gray); color: #CBD5E1; padding: 60px 20px; margin-top: 80px; }
        .footer-info h4 { color: var(--brand-gold); font-weight: 900; margin-bottom: 1.5rem; font-size: 1.3rem; }
        .footer-divider { height: 1px; background: #475569; margin: 40px 0; }
        .footer-highlight { color: var(--brand-gold); font-weight: bold; }

        /* Dashboard 進度條動畫 */
        .progress-bar-fill { transition: width 1s ease-in-out; }
    </style>
</head>
<body>
    <header class="hero-header">
        <h1 class="hero-title">Bản đồ Chức năng Đối tác Gyosen</h1>
        <div class="tab-container">
            <div id="tab-front" class="tab-btn active" onclick="switchTab('front')">Phục vụ Sảnh</div>
            <div id="tab-back" class="tab-btn inactive" onclick="switchTab('back')">Bếp</div>
            <div id="tab-dash" class="tab-btn inactive" onclick="switchTab('dash')">Bảng giờ làm (Beta)</div>
        </div>
    </header>

    <div class="max-w-[1150px] mx-auto px-4">
        <div id="dashboard-controls" class="hidden mb-6">
            <div class="bg-white p-4 rounded-2xl shadow-sm border border-slate-100 flex flex-col md:flex-row justify-between items-center gap-4">
                <div class="relative w-full md:w-auto flex-1 max-w-md">
                    <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fa-solid fa-magnifying-glass text-slate-400"></i>
                    </div>
                    <input type="text" id="searchInput" placeholder="Tìm tên, cấp độ (Ví dụ: L3)..." 
                        class="block w-full pl-10 pr-3 py-2 border border-slate-200 rounded-full leading-5 bg-slate-50 placeholder-slate-400 focus:outline-none focus:bg-white focus:ring-2 focus:ring-brand-gold focus:border-transparent transition duration-150 ease-in-out sm:text-sm"
                        onkeyup="filterData()">
                </div>
                <div class="text-xs text-slate-400 text-right w-full md:w-auto">
                    <div id="data-cutoff-display" class="font-bold text-slate-600 mb-1">Ngày chốt dữ liệu: Đang tải...</div>
                    <div id="last-update">Thời gian kết nối: Đang tải...</div>
                </div>
            </div>
        </div>

        <div id="common-timeline" class="timeline-container">
            <div class="schedule-grid">
                <div class="schedule-card"><span class="step-label">Step 01</span><h5 class="font-black text-lg">Chốt giờ làm</h5><p class="text-slate-400 font-bold">Cuối tháng</p></div>
                <div class="schedule-card" style="border-top: 6px solid var(--brand-red);"><span class="step-label" style="color:var(--brand-red)">Step 02</span><h5 class="font-black text-lg">Đánh giá</h5><p class="text-brand-red font-bold">Ngày 1-10 tháng sau</p></div>
                <div class="schedule-card" style="border-top: 6px solid var(--brand-gold);"><span class="step-label" style="color:var(--brand-gold)">Step 03</span><h5 class="font-black text-lg">Hiệu lực lương</h5><p class="text-brand-gold font-bold">Từ 01 tháng sau</p></div>
                <div class="schedule-card"><span class="step-label">Step 04</span><h5 class="font-black text-lg">Nhận lương mới</h5><p class="text-slate-600 font-bold">Ngày 05 tháng tiếp</p></div>
            </div>
            <div class="mt-8 bg-slate-50 p-6 rounded-2xl border border-slate-100">
                <h6 class="text-sm font-black text-slate-800 mb-3"><i class="fa-solid fa-calendar-check mr-2"></i>Ví dụ vận hành 2026:</h6>
                <div class="grid grid-cols-1 md:grid-cols-4 gap-4 text-sm text-slate-500">
                    <div><span class="font-bold text-slate-700">1. Chốt:</span> 31/01/2026 Đạt giờ làm</div>
                    <div><span class="font-bold text-slate-700">2. Đánh giá:</span> 01/02 - 10/02 Phỏng vấn</div>
                    <div><span class="font-bold text-brand-red">3. Hiệu lực:</span> 01/02 Điều chỉnh lương</div>
                    <div><span class="font-bold text-brand-gold">4. Phát lương:</span> 05/03 Nhận lương mới</div>
                </div>
            </div>
        </div>

        <div id="front-house-content" class="content-section active">Đang tải...</div>
        <div id="back-house-content" class="content-section">Đang tải...</div>
        
        <div id="dashboard-content" class="content-section min-h-[400px] relative">
            <div id="loader" class="absolute inset-0 flex flex-col items-center justify-center bg-white/80 z-20">
                <i class="fas fa-circle-notch loading-spinner text-4xl text-brand-gold mb-4"></i>
                <p class="text-slate-400 font-bold">Đang đọc dữ liệu...</p>
            </div>
            <div id="data-container" class="opacity-0 transition-opacity duration-500"></div>
        </div>
    </div>

    <footer class="footer-info">
        <div class="max-w-[1150px] mx-auto grid grid-cols-1 md:grid-cols-2 gap-12 text-left">
            <div>
                <h4><i class="fa-solid fa-eye mr-2"></i>Thế nào là "Giai đoạn Theo dõi"?</h4>
                <p class="leading-relaxed">Khi điểm đánh giá tháng dưới <span class="footer-highlight">3.75</span> hoặc xảy ra <span class="footer-highlight">sự cố nghiêm trọng</span>, nhân viên sẽ bước vào "Giai đoạn theo dõi" trong 1 tháng. Sau đó sẽ đánh giá lại: nếu không đạt sẽ bị <span class="footer-highlight">giáng cấp</span>, nếu đạt sẽ <span class="footer-highlight">giữ nguyên cấp</span>.</p>
            </div>
            <div>
                <h4><i class="fa-solid fa-triangle-exclamation mr-2"></i>Thế nào là "Bất thường Vận hành"?</h4>
                <p class="leading-relaxed">Chỉ việc xin nghỉ đột xuất, đi trễ, hoặc sai sót tại hiện trường, khiến đội ngũ phải điều chỉnh lịch làm việc, sai món hoặc ảnh hưởng trải nghiệm khách hàng.<br><span class="text-slate-500 text-sm mt-2 block">(Chú ý: Đã đổi ca trước hoặc có chứng nhận bất khả kháng thì không tính)</span></p>
            </div>
        </div>
        <div class="footer-divider"></div>
        <div class="text-center text-xs text-slate-500 tracking-widest uppercase">
            © 2026 Sổ tay Phát triển Chức năng PT Gyosen ｜ GYOSEN INTERNAL DOCUMENT
        </div>
    </footer>

    <script>
        // ================= 設定區 =================
        const csvUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSPKyIVGlT4rmWEOUPwSdccHGWEaGPF3QhMm0rXnh7g_0kJx9iXFzIGVoY_uWOUHN9La8KjZOp5BMAv/pub?gid=1617552127&single=true&output=csv';
        
        // ★ 手動設定：統計截止日
        const DATA_CUTOFF_DATE = "2026/01/07"; 
        
        // ================= 邏輯區 =================
        let isDashboardLoaded = false;
        let globalDashboardData = [];

        window.onload = function() {
            loadPart('front-house-content', 'front-house.html');
            loadPart('back-house-content', 'back-house.html');
            if(window.location.hash === '#dashboard') switchTab('dash');
        };

        function loadPart(id, file, callback) {
            fetch(file)
                .then(res => res.text())
                .then(data => {
                    document.getElementById(id).innerHTML = data;
                    if (callback) callback();
                })
                .catch(err => console.error('Không thể tải file:', file));
        }

        function switchTab(type) {
            const fBtn = document.getElementById('tab-front');
            const bBtn = document.getElementById('tab-back');
            const dBtn = document.getElementById('tab-dash');
            const fContent = document.getElementById('front-house-content');
            const bContent = document.getElementById('back-house-content');
            const dContent = document.getElementById('dashboard-content');
            const timeline = document.getElementById('common-timeline');
            const dashControls = document.getElementById('dashboard-controls');

            // Reset
            fBtn.className = 'tab-btn inactive';
            bBtn.className = 'tab-btn inactive';
            dBtn.className = 'tab-btn inactive';
            fContent.className = 'content-section';
            bContent.className = 'content-section';
            dContent.className = 'content-section';
            dashControls.classList.add('hidden');

            if (type === 'front') {
                fBtn.className = 'tab-btn active'; fContent.className = 'content-section active'; timeline.style.display = 'block';
            } else if (type === 'back') {
                bBtn.className = 'tab-btn active'; bContent.className = 'content-section active'; timeline.style.display = 'block';
            } else if (type === 'dash') {
                dBtn.className = 'tab-btn dashboard-active'; dContent.className = 'content-section active'; timeline.style.display = 'none';
                dashControls.classList.remove('hidden');
                initDashboard();
            }
        }

        function initDashboard() {
            if (isDashboardLoaded) return; 

            document.getElementById('data-cutoff-display').innerHTML = `<i class="fa-regular fa-clock mr-1"></i>Dữ liệu tính đến: ${DATA_CUTOFF_DATE}`;

            const urlParams = new URLSearchParams(window.location.search);
            const isRecruitmentMode = urlParams.get('demo') === '1';
            const now = new Date();
            const timeDisplay = document.getElementById('last-update');
            const loader = document.getElementById('loader');
            const container = document.getElementById('data-container');

            if(timeDisplay) timeDisplay.innerText = 'Thời gian kết nối: ' + now.toLocaleString('vi-VN', { hour: '2-digit', minute: '2-digit' });

            if (isRecruitmentMode) {
                const demoData = [
                    { "姓名": "Nhân viên mới (Ví dụ)", "等級": "L1", "本職級累積時數": "45", "狀態": "累積中" },
                    { "姓名": "Nhân viên cũ (Ví dụ)", "等級": "L2", "本職級累積時數": "295", "狀態": "可考核" }, 
                    { "姓名": "Cán bộ nòng cốt (Ví dụ)", "等級": "L3", "本職級累積時數": "120", "狀態": "累積中" }, 
                    { "姓名": "Cán bộ dự bị (Ví dụ)", "等級": "L2", "本職級累積時數": "150", "狀態": "覆核中" }, 
                    { "姓名": "Nhân viên L1 (Ví dụ)", "等級": "L1", "本職級累積時數": "155", "狀態": "需評核" }  
                ];
                globalDashboardData = demoData;
                renderDashboard(demoData);
                if(loader) loader.style.display = 'none';
                if(container) container.classList.remove('opacity-0');
                if(timeDisplay) timeDisplay.innerHTML += ' <span class="bg-[#B29A1F] text-white px-2 py-0.5 rounded text-xs ml-2 font-bold">Chế độ Demo Tuyển dụng</span>';
                isDashboardLoaded = true;
                return;
            }

            const freshCsvUrl = csvUrl + "&nocache=" + Date.now();
            Papa.parse(freshCsvUrl, {
                download: true, header: true, skipEmptyLines: true,
                complete: function(results) {
                    if (results.data && results.data.length > 0) {
                        globalDashboardData = results.data;
                        renderDashboard(results.data);
                        if(loader) loader.style.display = 'none';
                        if(container) container.classList.remove('opacity-0');
                        isDashboardLoaded = true;
                    } else {
                        showError('Đọc thành công nhưng không có dữ liệu');
                    }
                },
                error: function(err) {
                    console.error("Error:", err);
                    showError('Không thể đọc dữ liệu, vui lòng kiểm tra mạng');
                }
            });
        }

        function filterData() {
            const input = document.getElementById('searchInput');
            const filter = input.value.toUpperCase();
            if(!globalDashboardData.length) return;
            const filteredData = globalDashboardData.filter(row => {
                return Object.values(row).some(val => String(val).toUpperCase().includes(filter));
            });
            renderDashboard(filteredData);
        }

        // ▼▼▼ 進度條優化版 (灰色底 + 強制顯色 + 視覺居中 + 變大) ▼▼▼
        function renderDashboard(data) {
            const container = document.getElementById('data-container');
            if(!container) return;
            
            if (data.length === 0) {
                container.innerHTML = `<div class="p-10 text-center text-slate-400 bg-white rounded-xl border border-dashed border-slate-300"><i class="fa-regular fa-folder-open text-4xl mb-3 block opacity-20"></i>Không tìm thấy dữ liệu phù hợp</div>`;
                return;
            }

            const headers = Object.keys(data[0]);
            const colName = headers.find(h => h.includes('姓名') || h.includes('Name')) || headers[0];
            const colLevel = headers.find(h => h.includes('等級') || h.includes('職級') || h.includes('Level')) || '等級';
            const colStatus = headers.find(h => h.includes('狀態') || h.includes('Status')) || '狀態';
            
            // ★★★ 關鍵修正：嚴格尋找「本職級」且排除「總時數」 ★★★
            let colHours = headers.find(h => h.includes('本職級') || h.includes('累積') && !h.includes('總'));
            if (!colHours) colHours = headers.find(h => h.includes('時數') && !h.includes('總')); 

            let tableHtml = `
                <div class="hidden md:block bg-white rounded-3xl shadow-lg border border-slate-100 overflow-hidden">
                <table class="min-w-full text-left text-sm whitespace-nowrap border-collapse">
                    <thead class="bg-slate-50 border-b border-slate-200 font-black text-slate-600 uppercase tracking-wider sticky top-0 z-10">
                        <tr>
                            <th class="px-6 py-5 pl-8">Họ tên</th>
                            <th class="px-6 py-5">Cấp bậc / Tiến độ</th>
                            <th class="px-6 py-5 text-right text-brand-red">Giờ tích lũy</th>
                            <th class="px-6 py-5 text-center">Trạng thái</th>
                        </tr>
                    </thead>
                    <tbody class="divide-y divide-slate-100">
            `;

            let cardsHtml = `<div class="grid grid-cols-1 gap-4 md:hidden">`;

            data.forEach(row => {
                if (!row[colName] || row[colName] === '姓名') return;
                
                const name = row[colName];
                const level = row[colLevel] ? row[colLevel].trim() : 'New'; 
                const hours = row[colHours] || '0'; 
                const status = row[colStatus] || '-';
                const numHours = parseFloat(hours.replace(/,/g, '')) || 0;
                
                let rowClass = "hover:bg-slate-50 transition-colors bg-white";
                let levelBadgeClass = "bg-slate-100 text-slate-500 border-slate-200"; 
                let nameColorClass = "text-slate-700"; 
                let progressBarColor = "bg-[#B21F2C]"; 
                let targetHours = 150; 

                if (level === 'L3') {
                    rowClass = "bg-amber-50/60 hover:bg-amber-100 transition-colors border-l-4 border-l-[#B29A1F]"; 
                    levelBadgeClass = "bg-[#B29A1F] text-white border-[#B29A1F] shadow-sm"; 
                    nameColorClass = "text-slate-900"; 
                    progressBarColor = "bg-[#B29A1F]"; 
                    targetHours = 600;
                } else if (level === 'L2') {
                    rowClass = "bg-slate-50/80 hover:bg-blue-50 transition-colors border-l-4 border-l-blue-400"; 
                    levelBadgeClass = "bg-blue-500 text-white border-blue-500 shadow-sm"; 
                    nameColorClass = "text-slate-800";
                    progressBarColor = "bg-[#3B82F6]"; 
                    targetHours = 300;
                }

                // ★★★ 新增邏輯：如果是覆核/維持/觀察狀態，目標降低 ★★★
                if (status.includes('覆核') || status.includes('維持') || status.includes('觀察')) {
                    targetHours = (level === 'L3' ? 300 : 100);
                }

                let progressPercent = Math.min((numHours / targetHours) * 100, 100);
                if (numHours < 0) progressPercent = 0;

                let statusHtml = '';
                if (status.includes('需評核') || status.includes('可考核') || status.includes('可晉升')) {
                    statusHtml = `<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-green-100 text-green-700 ring-1 ring-green-600/20"><span class="w-1.5 h-1.5 mr-1.5 bg-green-500 rounded-full animate-pulse"></span>Có thể đánh giá</span>`;
                } else if (status.includes('觀察') || status.includes('覆核') || status.includes('維持')) {
                    statusHtml = `<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-orange-100 text-orange-700 ring-1 ring-orange-600/20">Đang phúc tra</span>`;
                } else {
                    statusHtml = `<span class="inline-flex items-center px-3 py-1 rounded-full text-xs font-bold bg-slate-100 text-slate-400">Đang tích lũy</span>`;
                }

                // ★ 電腦版：進度條加大
                tableHtml += `
                    <tr class="${rowClass} group">
                        <td class="px-6 py-4 pl-8 font-bold text-base ${nameColorClass}">${name}</td>
                        <td class="px-6 py-4">
                            <div class="flex items-center gap-3">
                                <span class="inline-block px-3 py-0.5 rounded-md border text-xs font-black tracking-wide ${levelBadgeClass}">${level}</span>
                                <div class="w-full max-w-[220px] h-4 bg-slate-200 rounded-full overflow-hidden shadow-inner">
                                    <div class="h-full ${progressBarColor} progress-bar-fill shadow-sm" style="width: ${progressPercent}%"></div>
                                </div>
                                <span class="text-xs text-slate-400 font-bold w-10">${Math.round(progressPercent)}%</span>
                            </div>
                        </td>
                        <td class="px-6 py-4 text-right">
                            <span class="font-mono font-black text-xl text-[#B21F2C] tracking-tight">${hours}</span>
                            <span class="text-xs text-slate-400 ml-1">/ ${targetHours}</span>
                        </td>
                        <td class="px-6 py-4 text-center">${statusHtml}</td>
                    </tr>
                `;

                // ★ 手機版：進度條加大
                cardsHtml += `
                    <div class="bg-white p-5 rounded-2xl shadow-sm border border-slate-100 relative overflow-hidden">
                        ${level === 'L3' ? '<div class="absolute top-0 left-0 w-1 h-full bg-[#B29A1F]"></div>' : ''}
                        ${level === 'L2' ? '<div class="absolute top-0 left-0 w-1 h-full bg-blue-400"></div>' : ''}
                        <div class="flex justify-between items-start mb-4 pl-2">
                            <div>
                                <h3 class="font-bold text-lg ${nameColorClass}">${name}</h3>
                                <span class="inline-block mt-1 px-2 py-0.5 rounded text-xs font-black ${levelBadgeClass}">${level}</span>
                            </div>
                            <div class="text-right">
                                <div class="font-mono font-black text-2xl text-[#B21F2C]">${hours}</div>
                                <div class="text-xs text-slate-400">Mục tiêu ${targetHours} H</div>
                            </div>
                        </div>
                        <div class="pl-2">
                            <div class="flex justify-between text-xs text-slate-400 mb-1"><span>Đạt</span><span>${Math.round(progressPercent)}%</span></div>
                            <div class="w-full h-4 bg-slate-200 rounded-full overflow-hidden mb-4 shadow-inner"><div class="h-full ${progressBarColor} progress-bar-fill shadow-sm" style="width: ${progressPercent}%"></div></div>
                            <div class="flex justify-end">${statusHtml}</div>
                        </div>
                    </div>
                `;
            });

            tableHtml += `</tbody></table></div>`;
            cardsHtml += `</div>`;
            container.innerHTML = tableHtml + cardsHtml;
        }

        function showError(msg) {
            const loader = document.getElementById('loader');
            if(loader) loader.innerHTML = `<div class="text-center text-red-500 font-bold px-4"><i class="fas fa-exclamation-triangle text-3xl mb-3 block"></i>${msg}</div>`;
        }
    </script>
</body>
</html>
